{"version":3,"sources":["battle_Control.js"],"names":["js_dataControl","require","GroupName","cc","Class","extends","Component","properties","canvas","Node","itemPrefab","default","type","Prefab","choosePrefab","Prefab_obstacle_01","Prefab_obstacle_02","Prefab_obstacle_03","Prefab_hero_01","Prefab_hero_02","Prefab_tempColl_touch","background","batBox","other","enemy","icon_arrow","followSpeed","onLoad","battleInit_basic","checkId","personPrefabNew","batlist","hero_list","obstacle_list","hero_route_list","state","name","list","lastId","boxIndex","hero_route_ok_list","isState","isOOOK","indexNum","getcheckId","bat","children","i","length","push","getComponent","batBoxName","console","log","perfabPool","init","battleInit_obstacle","otherList","y","x","point","j","bat_obstacle","battleInit_obstacle_detail","setObstacle","battleInit_hero","tempList","otherList_lock_id","otherList_lock_point","self","enemyList","id","pop","bat_hero","battleInit_hero_detail","updateHeroList","heroRouteOkList","getChildByName","on","EventType","TOUCH_START","event","selfItem","self_x","getLocation","self_y","heroList","route","slice","heroName","checkRoute","routeDirection","getNearEnemy","matchOKHeroRoute","currentBox","boxItem","temp","box_current","item","instantiate","addChild","setPosition","currentBox_destroy","child","destroy","box","itemList","groupId","createEnemy","group","empty","hero_basic","isDie","lastRouteTarget","tempColl_touch","TOUCH_MOVE","isCenter","parent","TOUCH_CANCEL","touchStop","TOUCH_END","update","dt","targetBoxItem","end","v2","start","position","direction","pNormalize","pSub","pAdd","pMult","sum","pDistance","z","splice","repeatList","noRepeatList","ok_list","repeatIndex","repeatIndexItem","noRepeatIndex","repeat","temp_okItem","o","startTarget","endTarget","openList","closeList","sureList","isSure_start","isSure_end","minF","minG","isStart","G","H","F","directionList","setColor","color","tempEndTarget","obsExList","obsId_right","obsId_down","obsId_left","obsId_top","tempCheckTarget","checkTarget","isOpen","isClose","isObstacle","isObsEx","H_x","Math","abs","H_y","label_G","addComponent","Label","fontSize","string","reverse","tempSureList","target","dataList"],"mappings":"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","file":"battle_Control.js","sourceRoot":"../../../../assets/js","sourcesContent":["﻿//导入外部脚本\nvar js_dataControl = require(\"dataControl\");\nconst GroupName = require('Types').GroupName;\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        canvas: cc.Node,\n        itemPrefab: {\n            default: null,\n            type: cc.Prefab\n        },\n        choosePrefab: {\n            default: null,\n            type: cc.Prefab\n        },\n        Prefab_obstacle_01: {\n            default: null,\n            type: cc.Prefab\n        },\n        Prefab_obstacle_02: {\n            default: null,\n            type: cc.Prefab\n        },\n        Prefab_obstacle_03: {\n            default: null,\n            type: cc.Prefab\n        },\n        Prefab_hero_01: {\n            default: null,\n            type: cc.Prefab\n        },\n        Prefab_hero_02: {\n            default: null,\n            type: cc.Prefab\n        },\n        Prefab_tempColl_touch: {\n            default: null,\n            type: cc.Prefab\n        },\n        background: {\n            default: null,\n            type: cc.Node\n        },\n        batBox: {\n            default: null,\n            type: cc.Node\n        },\n        other: {\n            default: null,\n            type: cc.Node\n        },\n        enemy: {\n            default: null,\n            type: cc.Node\n        },\n        icon_arrow: {\n            default: null,\n            type: cc.Prefab\n        },\n        followSpeed: 1\n    },\n    onLoad: function () {\n    \t\n    \t\n    },\n    //生成第一层战场数组-基础数据  (关卡id，预存资源对象)\n    battleInit_basic: function(checkId,personPrefabNew) {\n\t\t//初始化部分数组\n    \tthis.batlist = [];//-----------------------------战场基础层\n    \tthis.hero_list = [];//---------------------------战场英雄存储\n    \tthis.obstacle_list = [];//-----------------------战场障碍物存储\n    \tthis.hero_route_list = [];//---------------------英雄路线数据\n    \tthis.hero_route_list.state = 0;//----------------英雄路线——是否可启用 0=不可用，1=可用\n    \tthis.hero_route_list.name = null;//--------------英雄生成名字\n    \tthis.hero_route_list.list = [];//----------------英雄路线——存储路线数组\n    \tthis.hero_route_list.lastId = -1;//--------------英雄路线——记录上一次格子的名字  -1:初始     加入临时数组时进行赋值\n    \tthis.hero_route_list.boxIndex = -1;//------------英雄路线——记录格子下标   -1:初始   \n    \t\n    \tthis.hero_route_ok_list = [];//---------------------中心点英雄路线数据\n    \tthis.hero_route_ok_list.state = 0;//----------------中心点英雄路线——是否可启用 0=不可用，1=可用\n    \tthis.hero_route_ok_list.name = null;//--------------中心点英雄生成名字\n    \tthis.hero_route_ok_list.list = [];//----------------中心点英雄路线——存储路线数组\n    \tthis.hero_route_ok_list.lastId = -1;//--------------中心点英雄路线——记录上一次格子的名字  -1:初始     加入确认数组时进行赋值\n    \t\n    \tthis.isState = 0;\n    \tthis.isOOOK = 1;\n    \tthis.indexNum = 0;\n    \t\n    \tthis.checkId = js_dataControl.getcheckId();//-------获取关卡id\n\t\tvar bat = this.batBox.children;\n\t\tfor (let i = 0; i < bat.length; i++) {\n\t\t\tthis.batlist.push(bat[i].getComponent(\"batBox_basic\"));\n\t\t\tthis.batlist[i].batBoxName = bat[i].name;\n\t\t}\n\t\tconsole.log(this.batlist);\n        this.perfabPool = this.getComponent(\"prefabPool\");\n        this.perfabPool.init();\n\t\tthis.battleInit_obstacle(this.checkId,personPrefabNew);\n    },\n    //生成第二层战场数组-障碍物   (关卡id)\n    battleInit_obstacle: function(checkId,personPrefabNew){\n    \t//关卡序列\n    \tif (checkId == 1) {\n    \t\tvar otherList = [{y: 0,x: 4,point: 1},{y: 2,x: 4,point: 2},{y: 1,x: 4,point: 3},{y: 1,x: 6,point: 1},{y: 2,x: 7,point: 1}];\n    \t}\n    \tif (checkId == 2) {\n    \t\tvar otherList = [{y: 0,x: 4,point: 1},{y: 2,x: 4,point: 2},{y: 1,x: 4,point: 3}];\n    \t}\n    \tfor (let i = 0; i < otherList.length; i++) {//-----匹配战场数组\n    \t\tfor (let j = 0; j < this.batlist.length; j++) {//--------战场需要遍历50次，所以用batlist，而不用专门获取的batBox.getChildByName\n\t        \tif (this.batlist[j].x == otherList[i].x && this.batlist[j].y == otherList[i].y) {\n\t        \t\tthis.batlist[j].bat_obstacle = otherList[i].point;\n\t        \t\tthis.battleInit_obstacle_detail(otherList[i].point,this.batlist[j]);\n\t        \t}\n    \t\t}\n    \t}\n    \tconsole.log(this.obstacle_list);\n    \tjs_dataControl.setObstacle(this.obstacle_list);\n    \tthis.battleInit_hero(this.checkId,personPrefabNew);\n    },\n    //生成第三层战场数组-英雄   (关卡id)\n    battleInit_hero: function(checkId,personPrefabNew){\n    \t// let tempList = [{y: 4,x: 2,point: 6},{y: 3,x: 2,point: 7},{y: 2,x: 2,point: 8},{y: 1,x: 2,point: 9},{y: 0,x: 2,point: 10},{y: 4,x: 1,point: 11}];//----我方阵容-测试用的\n\t\tlet tempList = [{y: 4,x: 2,point: 6}];\n\t\tlet otherList = [];//-----------------------我方阵容\n    \tlet otherList_lock_id = 0;//----------------我方阵容——位置是否有重复英雄导入标识  0:是，1:不是\n    \tlet otherList_lock_point = 0;//-------------我方阵容——不同年龄系列英雄是否重复导入标识  0:是，1:不是\n    \tvar self = this;\n    \t//let fulinList = [{id: \"01\",point: 1},{id: \"02\",point: 2},{id: \"03\",point: 3}];//------符灵技能栏\n    \tif (checkId == 1) {\n\t\t\t//var enemyList = [{y: 4,x: 9,point: 1},{y: 2,x: 9,point: 2},{y: 0,x: 9,point: 3},{y: 3,x: 7,point: 4},{y: 1,x: 7,point: 5}];//----敌方阵容\n\t\t\tvar enemyList = [{y: 4,x: 9,point: 1}];\n    \t}\n    \tif (checkId == 2) {\n    \t\tvar enemyList = [{y: 3,x: 9,point: 1},{y: 1,x: 9,point: 2},{y: 0,x: 9,point: 3},{y: 0,x: 7,point: 4},{y: 1,x: 7,point: 5}];//----敌方阵容\n    \t}\n    \tfor (let i = 0; i < tempList.length; i++) {\n    \t\t//我方阵容区域内\n    \t\tif (tempList[i].id == \"00\" || tempList[i].id == \"10\" || tempList[i].id == \"20\" || tempList[i].id == \"30\" || tempList[i].id == \"40\"\n    \t\t || tempList[i].id == \"01\" || tempList[i].id == \"11\" || tempList[i].id == \"21\" || tempList[i].id == \"31\" || tempList[i].id == \"41\"\n    \t\t || tempList[i].id == \"02\" || tempList[i].id == \"12\" || tempList[i].id == \"22\" || tempList[i].id == \"32\" || tempList[i].id == \"42\") {\n    \t\t \tif (otherList.length < 5) {//----------------------------不超出5个英雄选择\n    \t\t\t\tfor (let j = 0; j < otherList.length; j++) {\n\t    \t\t \t\tif (otherList[j].x == tempList[i].x && otherList[j].y == tempList[i].y) {//-------发现已有英雄的位置上再放英雄，标识此次操作不加入阵容数组\n\t    \t\t \t\t\totherList_lock_id = 1;\n\t    \t\t \t\t}\n\t    \t\t \t\tif (otherList[j].point == tempList[i].point) {//---------发现放了不同年龄系列英雄，一个英雄分不同年龄阶段的卡牌\n    \t\t \t\t\t\totherList_lock_point = 1;\n    \t\t \t\t\t}\n\t\t    \t\t}\n\t    \t\t}\n    \t\t}\n    \t\tif (otherList.length < 5) {//----------------------------不超出5个英雄选择\n\t    \t\tif (otherList_lock_id == 0 && otherList_lock_point == 0) {//------标识们一致允许加入才能增加\n\t    \t\t\totherList.push(tempList[i]);\n\t    \t\t}\n\t    \t\tif (otherList_lock_id == 1 || otherList_lock_point == 1) {//------标识们一致允许加入才能增加\n\t    \t\t\totherList.pop();\n\t    \t\t\totherList.push(tempList[i]);\n\t    \t\t}\n    \t\t}\n    \t\t//初始化临时用的标识值\n    \t\totherList_lock_id = 0;\n    \t\totherList_lock_point = 0;\n\t\t}\n\t\t\n    \tfor (let i = 0; i < otherList.length; i++) {//-----我方英雄导入战场\n    \t\tfor (let j = 0; j < this.batlist.length; j++) {//--------战场需要遍历50次，所以用batlist，而不用专门获取的batBox.getChildByName\n\t        \tif (this.batlist[j].x == otherList[i].x && this.batlist[j].y == otherList[i].y) {\n\t        \t\tthis.batlist[j].bat_hero = otherList[i].point;\n\t        \t\tthis.battleInit_hero_detail(otherList[i].point,this.batlist[j],1,personPrefabNew);\n\t        \t}\n    \t\t}\n    \t}\n    \tfor (let i = 0; i < enemyList.length; i++) {//-----敌方英雄导入战场\n    \t\tfor (let j = 0; j < this.batlist.length; j++) {//--------战场需要遍历50次，所以用batlist，而不用专门获取的batBox.getChildByName\n\t        \tif (this.batlist[j].x == enemyList[i].x && this.batlist[j].y == enemyList[i].y) {\n\t        \t\tthis.batlist[j].bat_hero = enemyList[i].point;\n\t        \t\tthis.battleInit_hero_detail(enemyList[i].point,this.batlist[j],2,personPrefabNew);\n\t        \t}\n    \t\t}\n    \t}\n    \tjs_dataControl.updateHeroList(this.hero_list);\n\t\tvar heroRouteOkList = this.hero_route_ok_list;\n    \tthis.background.getChildByName(\"stopAllMove\").on(cc.Node.EventType.TOUCH_START, function ( event ) {\n\t\t\tlet selfItem = this;\n\t\t\tlet self_x = event.getLocation().x;\n\t\t\tlet self_y = event.getLocation().y;\n\t\t\tlet heroList = self.hero_list;\n\t\t\tfor (let j = 0; j < heroList.length; j++) {//---------匹配英雄表\n\t\t\t\theroList[j].route = heroList[j].route.slice(0,heroList[j].indexNum+1);\n\t\t\t}\n\t\t});\n\t\tthis.background.getChildByName(\"goAllMove\").on(cc.Node.EventType.TOUCH_START, function ( event ) {\n\t\t\tlet selfItem = this;\n\t\t\tlet self_x = event.getLocation().x;\n\t\t\tlet self_y = event.getLocation().y;\n\t\t\tlet heroList = self.hero_list;\n\t\t\tfor (let j = 0; j < heroList.length; j++) {//---------匹配英雄表\n\t\t\t\t//if (heroList[j].groupId == 1) {\n\t\t\t\tif (heroList[j].heroName == \"hero_6\") {\n\t\t\t\t\tlet checkRoute = this.routeDirection(heroRouteOkList.list[heroRouteOkList.list.length-1],self.getNearEnemy(heroList[j],heroList));\n\t\t\t\t\tself.matchOKHeroRoute(heroList[j].name,self.getNearEnemy(heroList[j],heroList));//-------传参英雄名和格子对象给确认数组\n\t\t\t\t\tconsole.log(self.getNearEnemy(heroList[j],heroList),heroRouteOkList);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t});\n    },\n    //选取格子高亮   (格子对象)\n    currentBox: function(boxItem){\n    \tvar temp = this.batBox.getChildByName(\"batBox_y\" + boxItem.y + \"_x\" + boxItem.x);\n    \t//console.log(temp.getComponent(\"batBox_basic\").box_current,temp.getComponent(\"batBox_basic\"));\n    \tif(temp.getComponent(\"batBox_basic\").box_current == 0){//------------------------------防止重复加载同一个格子高亮导致出现异常bug情况\n\t\t\ttemp.getComponent(\"batBox_basic\").box_current = 1;//-------------------------------高亮选择到的格子\n\t    \tlet item = cc.instantiate(this.icon_arrow); \n\t\t\ttemp.addChild(item);\n\t\t\titem.setPosition(boxItem.x,boxItem.y);\n\t    \titem.name = \"currentBox\";\n    \t}\n    },\n    //销毁高亮资源   (格子对象)\n    currentBox_destroy: function(boxItem){\n\t\tthis.batBox.getChildByName(\"batBox_y\" + boxItem.y + \"_x\" + boxItem.x).getComponent(\"batBox_basic\").box_current = 0;//----------------------清除高亮记录\n\t\tlet child = this.batBox.getChildByName(\"batBox_y\" + boxItem.y + \"_x\" + boxItem.x).getChildByName(\"currentBox\");\n\t\tif (child) { child.destroy(); }//--------------------------------------------------------------销毁高亮资源\n    },\n    //障碍物具体参数数组   (障碍物编号，格子对象)\n    battleInit_obstacle_detail: function(point,box){\n    \tif (point == 1) { var item = cc.instantiate(this.Prefab_obstacle_01); }\n    \tif (point == 2) { var item = cc.instantiate(this.Prefab_obstacle_02); }\n    \tif (point == 3) { var item = cc.instantiate(this.Prefab_obstacle_03); }\n    \tthis.batBox.getChildByName(\"batBox_y\" + box.y + \"_x\" + box.x).addChild(item);\n    \titem.setPosition(0,0);\n    \titem.name = \"point_\" + point;\n    \tvar itemList = {\n    \t\tx\t\t: box.x,\t\t\t\t//障碍物当前所处x轴\n    \t\ty\t\t: box.y,\t\t\t\t//障碍物当前所处y轴\n    \t}\n    \tthis.obstacle_list.push(itemList);\n    \t\n    },\n    //英雄具体参数数组   (英雄编号，格子对象，敌我英雄标识id: 1=我方   2=敌方)\n    battleInit_hero_detail: function(point,box,groupId,personPrefabNew){\n    \tif (point == 1) { var item = this.perfabPool.createEnemy(); }\n    \tif (point == 2) { var item = this.perfabPool.createEnemy(); }\n    \tif (point == 3) { var item = this.perfabPool.createEnemy(); }\n    \tif (point == 4) { var item = this.perfabPool.createEnemy(); }\n    \tif (point == 5) { var item = this.perfabPool.createEnemy(); }\n    \tif (point == 6) { var item = this.perfabPool.createEnemy(); }\n    \tif (point == 7) { var item = this.perfabPool.createEnemy(); }\n    \tif (point == 8) { var item = this.perfabPool.createEnemy(); }\n    \tif (point == 9) { var item = this.perfabPool.createEnemy(); }\n    \tif (point == 10) { var item = this.perfabPool.createEnemy(); }\n\t\tif (point == 11) { var item = this.perfabPool.createEnemy(); }\n\t\tif(groupId == 1){\n\t\t\titem.getComponent('person').group = GroupName.other\n\t\t\tthis.other.addChild(item);\n\t\t}\n\t\tif(groupId == 2){\n\t\t\titem.getComponent('person').group = GroupName.empty;\n\t\t\tthis.enemy.addChild(item);\n\t\t}\n\t\tvar x = this.batBox.getChildByName(\"batBox_y\" + box.y + \"_x\" + box.x).x;\n\t\tvar y = this.batBox.getChildByName(\"batBox_y\" + box.y + \"_x\" + box.x).y;\n    \titem.setPosition(x,y);\n    \titem.name = \"hero_\" + point;\n    \tif(groupId == 1){\n\t\t\tvar hero_basic = this.other.getChildByName(item.name).getComponent(\"person\");\n\t    \thero_basic.groupId = groupId;\n\t    \thero_basic.heroName = item.name;\n\t    \thero_basic.x = box.x;\n\t    \thero_basic.y = box.y;\n\t    \thero_basic.point = point;\n    \t}\n    \tif(groupId == 2){\n\t\t\tvar hero_basic = this.enemy.getChildByName(item.name).getComponent(\"person\");\n\t    \thero_basic.groupId = groupId;\n\t    \thero_basic.heroName = item.name;\n\t    \thero_basic.x = box.x;\n\t    \thero_basic.y = box.y;\n\t    \thero_basic.point = point;\n    \t}\n    \tlet itemList = {\n    \t\tgroupId : groupId,\t\t\t\t//英雄敌我阵容标识\n    \t\theroName: item.name,\t\t\t//英雄预存资源生成名称\n    \t\tx\t\t: box.x,\t\t\t\t//英雄当前所处x轴\n    \t\ty\t\t: box.y,\t\t\t\t//英雄当前所处y轴\n    \t\tpoint\t: point,\t\t\t\t//英雄标记  纪录具体是哪个英雄\n    \t\tindexNum: 0,\t\t\t\t\t//英雄移动路线的当前到达位置，就是说数组里的第几个位置\n    \t\troute\t: [],\t\t\t\t\t//英雄移动路线   状态切换为移动时，赋值路线\n\t\t\tstate\t: 10,\t\t\t\t\t//英雄状态   10：待命，11：移动\n\t\t\tisDie   : 1\t\t\t\t\t\t//死亡标识   0：死亡，1:未死亡\n    \t}\n    \tthis.hero_list.push(itemList);\n    \tvar self = this;\n\t\tvar heroRouteOkList = this.hero_route_ok_list;\n\t\tvar lastRouteTarget = null;//-------------------用作碰触到障碍物后保留前一个格子对象\n\t\tif(groupId == 1){\n\t\t\tthis.other.getChildByName(\"hero_\" + point).on(cc.Node.EventType.TOUCH_START, function ( event ) {\n\t\t\t\tlet selfItem = this;\n\t\t\t\t//console.log(selfItem);\n\t\t\t\tlet self_x = event.getLocation().x;\n\t\t\t\tlet self_y = event.getLocation().y;\n\t\t\t\tif (self.background.getChildByName(\"tempColl_touch\")) { self.background.getChildByName(\"tempColl_touch\").destroy();}//--------销毁之前生成的临时路线碰触点 \n\t\t\t\t//---生成临时路线碰触点   如果不重新生成，会出现触碰点一直碰着相同格子没反应的问题，例如不断触碰起点，碰撞系统好像如果不离开碰触体，就不会重新算碰撞到\n\t\t\t\tlet tempColl_touch = cc.instantiate(self.Prefab_tempColl_touch);\n\t\t\t\tself.background.addChild(tempColl_touch);\n\t\t\t\ttempColl_touch.setPosition(self_x,self_y);\n\t\t\t\tself.background.getChildByName(\"tempColl_touch\").getComponent(\"colliderListener\").boxItem = null;//---初始化碰撞点上的格子对象\n\t\t    \t/*if (heroRouteOkList.list.length != 0) {\n\t\t\t\t\tlet heroList = self.hero_list;\n\t\t\t\t\tfor (let j = 0; j < heroList.length; j++) {//---------匹配英雄表\n\t\t\t\t\t\tif(self.hero_list[j].heroName == selfItem.name){//--------------找出赋值英雄移动数组\n\t\t\t\t\t\t\tself.hero_list[j].state = 10;//------------------------------------英雄状态切换为：移动\n\t\t\t\t\t\t\tself.hero_list[j].route = heroRouteOkList.list;//------------------赋值路线\n\t\t\t\t\t\t\tself.hero_list[j].indexNum = 0;//----------------------------------初始化移动路线的到达位置\n\t\t\t\t\t\t\theroRouteOkList.list = [];//---------------------------临时路线清空\n\t\t\t\t\t\t\theroRouteOkList.state = 0;//---------------------------临时路线状态改为不启用\n\t\t\t\t\t\t\theroRouteOkList.name = null;//-------------------------临时路线的英雄名清除\n\t\t\t\t\t\t\theroRouteOkList.lastId = -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}*/\n\t\t\t});\n\t\t\tthis.other.getChildByName(\"hero_\" + point).on(cc.Node.EventType.TOUCH_MOVE, function ( event ) {\n\t\t\t\tlet selfItem = this;\n\t\t\t\tlet self_x = event.getLocation().x;\n\t\t\t\tlet self_y = event.getLocation().y;\n\t\t\t\tself.background.getChildByName(\"tempColl_touch\").x = self_x;//-------实时更改临时路线碰触点位置\n\t\t\t\tself.background.getChildByName(\"tempColl_touch\").y = self_y;\n\t\t\t\tlet isCenter = 0;\n\t\t\t\tvar boxItem = self.background.getChildByName(\"tempColl_touch\").getComponent(\"colliderListener\").boxItem;\n\t\t\t\tif (boxItem) {\n\t\t\t\t\tif (boxItem.name == \"batBox_Center\") {\n\t\t\t\t\t\tboxItem = boxItem.parent.getComponent(\"batBox_basic\");\n\t\t\t\t\t\tisCenter = 1;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tboxItem = boxItem.getComponent(\"batBox_basic\");\n\t\t\t\t\t}\n\t\t\t\t\tif (!boxItem.bat_obstacle) {\n\t\t\t\t\t\tif (heroRouteOkList.lastId == -1) {//--------------------------------还没记录到上一次的格子名字，证明是在获取第一次路线信息\n\t\t\t\t\t\t\tfor (let i = 0; i < self.hero_list.length; i++) {//------------循环英雄数组\n\t\t\t\t\t\t\t\tif (self.hero_list[i].heroName == selfItem.name) {//----------匹配当前点击的格子上是否存在英雄\n\t\t\t\t\t\t\t\t\tself.matchOKHeroRoute(selfItem.name,boxItem);//-------传参英雄名和格子对象给确认数组\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif (isCenter == 1) {\n\t\t\t\t\t\t\t\tif(heroRouteOkList.lastId != boxItem.batBoxName){//----------当前触碰的格子不是上一次记录的格子（此判断为了防止不断触碰相同格子一直执行以下方法）\n\t\t\t\t\t\t\t\t\tself.matchOKHeroRoute(heroRouteOkList.name,boxItem);//-------传参英雄名和格子对象给确认数组\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.other.getChildByName(\"hero_\" + point).on(cc.Node.EventType.TOUCH_CANCEL, function ( event ) {\n\t\t\t\tlet self_x = event.getLocation().x;\n\t\t\t\tlet self_y = event.getLocation().y;\n\t\t\t\t//console.log(heroRouteOkList.list,heroRouteOkList.name);\n\t\t\t\tvar boxItem = self.background.getChildByName(\"tempColl_touch\").getComponent(\"colliderListener\").boxItem;\n\t\t\t\tif (boxItem.name == \"batBox_Center\") {\n\t\t\t\t\tboxItem = boxItem.parent.getComponent(\"batBox_basic\");\n\t\t\t\t}else{\n\t\t\t\t\tboxItem = boxItem.getComponent(\"batBox_basic\");\n\t\t\t\t}\n\t\t\t\tself.matchOKHeroRoute(heroRouteOkList.name,boxItem);//-------传参英雄名和格子对象给确认数组，有时越墙后也能填补后续路线\n\t\t\t\tself.touchStop();\n\t\t\t});\n\t\t\tthis.other.getChildByName(\"hero_\" + point).on(cc.Node.EventType.TOUCH_END, function ( event ) {\n\t\t\t\tlet self_x = event.getLocation().x;\n\t\t\t\tlet self_y = event.getLocation().y;\n\t\t\t\tvar boxItem = self.background.getChildByName(\"tempColl_touch\").getComponent(\"colliderListener\").boxItem;\n\t\t\t\tif (boxItem.name == \"batBox_Center\") {\n\t\t\t\t\tboxItem = boxItem.parent.getComponent(\"batBox_basic\");\n\t\t\t\t}else{\n\t\t\t\t\tboxItem = boxItem.getComponent(\"batBox_basic\");\n\t\t\t\t}\n\t\t\t\tself.matchOKHeroRoute(heroRouteOkList.name,boxItem);//-------传参英雄名和格子对象给确认数组，有时越墙后也能填补后续路线\n\t\t\t\tself.touchStop();\n\t\t\t});\n\t\t}\n    },\n    update: function (dt) {\n    \tlet self = this;\n\t\tlet heroList = self.hero_list;\n\t\tfor (let j = 0; j < heroList.length; j++) {//---------匹配英雄表\n\t\t\tif(heroList[j].state == 11){//--------------找出赋值英雄移动数组\n\t\t\t\tlet targetBoxItem = self.batBox.getChildByName(\"batBox_y\" + heroList[j].route[heroList[j].indexNum].y + \"_x\" + heroList[j].route[heroList[j].indexNum].x);\n\t\t\t\tlet end = cc.v2(targetBoxItem.x,targetBoxItem.y);//------------------------获取下个目标xy\n\t\t\t\tlet start = self.other.getChildByName(heroList[j].heroName).position;//-------------获取目标当前xy\n\t\t\t\tlet direction = cc.pNormalize(cc.pSub(end, start));//------------------------先获取俩个向量的差，然后返回一个长度为1的标准化后的向量\n\t\t\t\tlet item = cc.pAdd(start, cc.pMult(direction, self.followSpeed ));//----缩放上面的标准化向量，然后把初始目标xy加上缩放的向量\n\t\t\t\tself.other.getChildByName(heroList[j].heroName).setPosition(item);//----------------更新目标位置\n\t\t\t\tlet sum = cc.pDistance(start, end);\n\t\t\t\tif (sum <= 1 && heroList[j].indexNum < heroList[j].route.length) {//-----------------向量测出英雄和下一个格子中心在1范围内就进入下一个路线\n\t\t\t\t\theroList[j].x = targetBoxItem.getComponent(\"batBox_basic\").x;//----------------------------------------英雄当前x轴修改\n\t\t\t\t\theroList[j].y = targetBoxItem.getComponent(\"batBox_basic\").y;//----------------------------------------英雄当前y轴修改\n\t\t\t\t\tjs_dataControl.updateHeroList(heroList);//----------------更新存储数据层js的英雄详细数组\n\t\t\t\t\t//英雄路线移动完毕后执行以下方法\n\t\t\t\t\tif ((heroList[j].indexNum+1) == heroList[j].route.length) {\n\t\t\t\t\t\tself.batBox.getChildByName(\"batBox_y\" + heroList[j].route[heroList[j].indexNum].y + \"_x\" + heroList[j].route[heroList[j].indexNum].x).bat_hero = heroList[j].point;//------------------------更改第一层战场格子上的英雄标记\n\t\t\t\t\t\theroList[j].state = 10;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tself.batBox.getChildByName(\"batBox_y\" + heroList[j].route[heroList[j].indexNum].y + \"_x\" + heroList[j].route[heroList[j].indexNum].x).bat_hero = heroList[j].point;//------------------------更改第一层战场格子上的英雄标记\n\t\t\t\t\t}\n\t\t\t\t\theroList[j].indexNum++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n    },\n    //鼠标或手指碰触结束   (路线确认数组)\n    touchStop: function(){\n    \tvar self = this;\n\t\tvar heroRouteOkList = this.hero_route_ok_list;\n\t\tfor (let z = 0; z < heroRouteOkList.list.length; z++) {\n\t\t\tself.currentBox_destroy(heroRouteOkList.list[z]);//--------------------------销毁高亮资源方法\n\t\t}\n    \tif (heroRouteOkList.list.length != 0) {\n\t\t\tlet heroList = self.hero_list.length;\n\t\t\tfor (let j = 0; j < heroList; j++) {//---------匹配英雄表\n\t\t\t\tif(self.hero_list[j].heroName == heroRouteOkList.name){//--------------找出赋值英雄移动数组\n\t\t\t\t\tself.hero_list[j].state = 11;//------------------------------------英雄状态切换为：移动\n\t\t\t\t\tself.hero_list[j].route = heroRouteOkList.list;//------------------赋值路线\n\t\t\t\t\tself.hero_list[j].indexNum = 0;//----------------------------------初始化移动路线的到达位置\n\t\t\t\t\theroRouteOkList.list = [];//---------------------------临时路线清空\n\t\t\t\t\theroRouteOkList.state = 0;//---------------------------临时路线状态改为不启用\n\t\t\t\t\theroRouteOkList.name = null;//-------------------------临时路线的英雄名清除\n\t\t\t\t\theroRouteOkList.lastId = -1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n    },\n    //检测触碰到的英雄-确认   (英雄名,格子对象)\n    matchOKHeroRoute: function(heroName,boxItem){\n    \tlet heroRouteOkList = this.hero_route_ok_list;\n\t\theroRouteOkList.state = 1;//----------------------------------临时路线记录数组启用\n\t\theroRouteOkList.name = heroName;//----------------------------临时路线数组，记录英雄标识\n\t\theroRouteOkList.lastId = boxItem.batBoxName;//----------------赋值当前格子的名字\n\t\tif (heroRouteOkList.list.length == 0) {//-----------------------------已选格子不再执行以下方法\n    \t\tlet item = {\n    \t\t\tx\t: boxItem.x,\n    \t\t\ty\t: boxItem.y\n    \t\t}\n    \t\theroRouteOkList.list.push(item);\n\t\t\tthis.currentBox(boxItem);\n\t\t}else{\n\t\t\tlet z = -1;//--------------获取确认数组的最后一个格子id\n\t\t\t//---获取A*填充数组，条件是当前确认数组最后一个格子对象和最新所选到的格子对象，用作处理可能越几格的路线填充\n\t\t\tlet checkRoute = this.routeDirection(heroRouteOkList.list[heroRouteOkList.list.length-1],boxItem);\n\t\t\tconsole.log(checkRoute,heroRouteOkList.list);\n\t\t\tif (checkRoute) { checkRoute.splice(0,1); }//-----------清空A*返回的路线数组的第一个格子路线，因为会和旧路线最后一个格子重复了\n\t\t\tlet repeatList = [];//-----------------存储A*填充数组里和当前确认数组重复的格子对象，用作出现路线重复回滚\n\t\t\tlet noRepeatList = [];//---------------存储A*填充数组里不和当前确认数组不重复的格子对象，用作出现路线重复回滚时，可以继续填充路线\n\t\t\tlet ok_list = [];//--------------------临时存储确认数组的list\n\t\t\tlet repeatIndex = -1;//----------------记录A*填充数组最后一个格子下标   -1:初始   \n\t\t\tlet repeatIndexItem = null;//----------记录A*填充数组最后一个格子对象   -1:初始   \n\t\t\tlet noRepeatIndex = -1;//--------------记录回滚点是否触发的标识   1:是，2:否  \n\t\t\tfor (let i = 0; i < checkRoute.length; i++) {\n\t\t\t\tfor (let j = 0; j < heroRouteOkList.list.length; j++) {\n\t\t\t\t\tif (heroRouteOkList.list[j].x == checkRoute[i].x && heroRouteOkList.list[j].y == checkRoute[i].y) {\n\t\t\t\t\t\trepeatList.push(checkRoute[i]);\n\t\t\t\t\t\tcheckRoute[i].repeat = 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\theroRouteOkList.list.push(checkRoute[i]);\n\t\t\t\tthis.currentBox(this.batBox.getChildByName(\"batBox_y\" + checkRoute[i].y + \"_x\" + checkRoute[i].x).getComponent(\"batBox_basic\"));\n\t\t\t}\n\t\t\tconsole.log(repeatList,heroRouteOkList.list);\n\t\t\tif (repeatList.length > 0) {//-----------A*填充数组存在2个值时代表越墙或者终点不只在起点九宫格\n\t\t\t\tfor (let x = 0; x < heroRouteOkList.list.length; x++) {\n\t\t\t\t\tif (repeatIndex == -1) {//-----------------标识不存在时\n\t\t\t\t\t\tif (repeatList[repeatList.length-1].x == heroRouteOkList.list[x].x && repeatList[repeatList.length-1].y == heroRouteOkList.list[x].y) {//------当前格子id等于确认数组id时\n\t\t\t\t\t\t\trepeatIndex = x;//-----------------赋值标识为当前循环下标\n\t\t\t\t\t\t\trepeatIndexItem = this.batBox.getChildByName(\"batBox_y\" + heroRouteOkList.list[x].y + \"_x\" + heroRouteOkList.list[x].x).getComponent(\"batBox_basic\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tlet temp_okItem = this.batBox.getChildByName(\"batBox_y\" + heroRouteOkList.list[x].y + \"_x\" + heroRouteOkList.list[x].x).getComponent(\"batBox_basic\").batBoxName;\n\t\t\t\t\t\tconsole.log(repeatIndexItem.batBoxName , temp_okItem);\n\t\t\t\t\t\tif (repeatIndexItem.batBoxName != temp_okItem && noRepeatIndex == -1) {//还没检测到出现回滚点，就一直销毁前面的高亮路线\n\t\t\t\t\t\t\tthis.currentBox_destroy(heroRouteOkList.list[x]);//--------------------------销毁高亮资源方法\n\t\t\t\t\t\t}else{//-----------------------------------------------------------------检测到出现回滚点，停止销毁高亮路线，保留后续循环的路线，因为那些基本上是回滚后的新路线\n\t\t\t\t\t\t\tnoRepeatIndex = 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (let o = 0; o < repeatIndex +1; o++) {//---循环不重复的下标+1的次数来获取确认数组路线\n\t\t\t\t\tlet item = {\n\t\t\t\t\t\tx\t: heroRouteOkList.list[o].x,\n\t\t\t\t\t\ty\t: heroRouteOkList.list[o].y\n\t\t\t\t\t}\n\t\t\t\t\tok_list.push(item);\n\t\t\t\t}\n\t\t\t\theroRouteOkList.list = ok_list;\n\t\t\t\tconsole.log(repeatIndex,heroRouteOkList.list);\n\t\t\t\tconsole.log(noRepeatList,repeatList);\n\t\t\t}\n\t\t}\n\t\t//console.log(heroRouteOkList.list);\n    },\n    //A*算法   (原点目标，终点目标)\n    routeDirection: function(startTarget,endTarget){\n    \tif (startTarget.x == endTarget.x && startTarget.y == endTarget.y) { return false; }//---------------如果起点和终点一样就退出方法\n    \tlet openList = [];//---------------九宫格临时存放格子数组\n    \tlet closeList = [];//--------------九宫格临时存放确认数组\n    \tlet sureList = [];//---------------九宫格最终确认数组\n    \tlet isSure_start = 0;//------------是否到达终点   0：不是   1：是\n    \tlet isSure_end = 0;//--------------是否到达起点   0：不是   1：是\n    \tlet minF = 0;//--------------------F值最小值\n    \tlet minG = 0;//--------------------G值最小值\n    \tlet parent = {x: startTarget.x, y: startTarget.y, isStart: 1, G: 0, H:0, F:0};//-----------isStart: 起点的唯一标识\n    \topenList.push(parent);\n\t\t//方向数组  也可用作判断格子九宫格里其余格子是否在战场内数组   id：判断方向的数值   direction：上下左右斜方向值\n\t\tlet directionList = [{y:0,x:1,direction:1},{y:-1,x:1,direction:2},{y:-1,x:0,direction:3},{y:-1,x:-1,direction:4},{y:0,x:-1,direction:5},{y:1,x:-1,direction:6},{y:1,x:0,direction:7},{y:1,x:1,direction:8}];\n\t\tthis.batBox.getChildByName(\"batBox_y\" + startTarget.y + \"_x\" + startTarget.x).setColor(cc.color(\"#008102\"));//-----测试阶段，上颜色标识用\n\t\tthis.batBox.getChildByName(\"batBox_y\" + endTarget.y + \"_x\" + endTarget.x).setColor(cc.color(\"#fff\"));//-----测试阶段，上颜色标识用\n\t\tvar tempEndTarget = this.batBox.getChildByName(\"batBox_y\" + endTarget.y + \"_x\" + endTarget.x).getComponent(\"batBox_basic\");\n\t\tfor (let j = 0; j < openList.length; j++) {\n\t\t\tif (isSure_start == 1) { break; }//----------已到达终点，退出循环\n\t\t\t//console.log(j+\"——————————————————————————————————————————————————\");\n\t\t\t//console.log(parent,openList[j]);\n\t\t\tlet obsExList = [];//--------------障碍物上下左右格子的数组\n    \t\tlet obsId_right = null;//----------当前障碍物格子的右侧格子--临时禁止加入临时数组\n    \t\tlet obsId_down = null;//-----------当前障碍物格子的下侧格子--临时禁止加入临时数组\n    \t\tlet obsId_left = null;//-----------当前障碍物格子的左侧格子--临时禁止加入临时数组\n    \t\tlet obsId_top = null;//------------当前障碍物格子的上侧格子--临时禁止加入临时数组\n\t\t\tfor (let i = 0; i < directionList.length; i++) {//------------------获取路线障碍物上下左右格子的数组\n\t\t\t\t//计算出九宫格内当前循环的格子是否在战场内  原理：利用格子的行列值进行运算，得出结果异常则不属于战场内格子\n\t    \t\tlet tempCheckTarget = this.batBox.getChildByName(\"batBox_y\" + (parent.y + directionList[i].y) + \"_x\" + (parent.x + directionList[i].x));\n\t\t\t\tif (tempCheckTarget) {//----------是否存在格子\n\t\t\t\t\tvar checkTarget = tempCheckTarget.getComponent(\"batBox_basic\");\n\t    \t\t\tif (checkTarget.bat_obstacle) {//---------------------当前循环九宫格格子是障碍物\n\t    \t\t\t\tif (i == 0 || i == 2 || i == 4 || i == 6) {\n\t    \t\t\t\t\tobsId_right = {y:(checkTarget.y + directionList[0].y),x:(checkTarget.x + directionList[0].x)};\n\t    \t\t\t\t\tobsId_down = {y:(checkTarget.y + directionList[2].y),x:(checkTarget.x + directionList[2].x)};\n\t    \t\t\t\t\tobsId_left = {y:(checkTarget.y + directionList[4].y),x:(checkTarget.x + directionList[4].x)};\n\t    \t\t\t\t\tobsId_top = {y:(checkTarget.y + directionList[6].y),x:(checkTarget.x + directionList[6].x)};\n\t    \t\t\t\t\tobsExList.push(obsId_right,obsId_down,obsId_left,obsId_top);\n\t    \t\t\t\t}\n\t    \t\t\t}\n\t    \t\t}\n\t\t\t}\n\t    \tfor (let i = 0; i < directionList.length; i++) {//------------------获取路线临时数组\n\t    \t\tlet isOpen = 0;//------------------是否已记录在临时数组标识   0：不是   1：是\n\t    \t\tlet isClose = 0;//-----------------是否已记录在确认数组标识   0：不是   1：是\n\t    \t\tlet isObstacle = 0;//--------------是否障碍物   0：不是   1：是\n\t    \t\tlet isObsEx = 0;//-----------------当前格子是否位于障碍物格子上下左右侧的格子位置上，用于判断是否处于斜格处理   0：不是   1：是\n\t    \t\t//计算出九宫格内当前循环的格子  原理：利用格子的行列值进行运算，得出结果异常则不属于战场内格子\n\t    \t\tlet tempCheckTarget = this.batBox.getChildByName(\"batBox_y\" + (parent.y + directionList[i].y) + \"_x\" + (parent.x + directionList[i].x));\n\t    \t\tif (tempCheckTarget) {//----------是否存在格子\n\t\t\t\t\tvar checkTarget = tempCheckTarget.getComponent(\"batBox_basic\");\n\t    \t\t\tif (checkTarget.bat_obstacle) {//---------------------当前循环九宫格格子是障碍物\n\t    \t\t\t\tisObstacle = 1;\n\t    \t\t\t}else{\n\t\t    \t\t\tfor (let x = 0; x < closeList.length; x++) {//------------------当前循环九宫格格子是否已记录在确认数组\n\t\t\t    \t\t\tif (checkTarget.x == closeList[x].x && checkTarget.y == closeList[x].y) {\n\t\t\t    \t\t\t\tisClose = 1;\n\t\t\t    \t\t\t\tbreak;\n\t\t\t    \t\t\t}\n\t\t\t    \t\t}\n\t\t    \t\t\tfor (let x = 0; x < openList.length; x++) {//-------------------当前循环九宫格格子是否已记录在临时数组\n\t\t\t    \t\t\tif (checkTarget.x == openList[x].x && checkTarget.y == openList[x].y) {\n\t\t\t    \t\t\t\tisOpen = 1;\n\t\t\t    \t\t\t\tbreak;\n\t\t\t    \t\t\t}\n\t\t\t    \t\t}\n\t\t    \t\t\tfor (let o = 0; o < obsExList.length; o++) {//------------------当前循环九宫格格子是否位于障碍物格子上下左右侧的格子位置上，是的话就不能纳入赋值ghf处理\n\t    \t\t\t\t\tif (checkTarget.x == obsExList[o].x && checkTarget.y == obsExList[o].y) {\n\t\t    \t\t\t\t\tisObsEx = 1;\n\t\t    \t\t\t\t\tbreak;\n\t\t    \t\t\t\t}\n\t    \t\t\t\t}\n\t    \t\t\t}\n\t    \t\t\tif (isClose == 0 && isOpen == 0 && isObstacle == 0 && isObsEx == 0) {//-------------如任何检查判断为未触发，则视为当前格子是新处理格子\n\t\t\t\t\t\tlet H_x = Math.abs(tempEndTarget.x - checkTarget.x);\n\t\t\t\t\t\tlet H_y = Math.abs(tempEndTarget.y - checkTarget.y);\n\t\t\t\t\t\tlet H = (H_x + H_y) * 10;\n\t\t\t\t\t\tlet G;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(i == 0 || i == 2 || i == 4 || i == 6){\n\t\t\t\t\t\t\tG = 10 + parent.G;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tG = 14 + parent.G;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet item = {\n\t\t\t\t\t\t\tx: checkTarget.x,\n\t\t\t\t\t\t\ty: checkTarget.y,\n\t\t\t\t    \t\tG: G,//--------------------------------从起点 A 移动到指定方格的移动代价，沿着到达该方格而生成的路径。\n\t\t\t\t    \t\tH: H,//--------------------------------从指定的方格移动到终点 B 的估算成本\n\t\t\t\t    \t\tF: G+H,\n\t\t\t\t    \t\tdirection: directionList[i].direction\n\t\t\t\t\t\t}\n\t\t\t\t        let label_G = new cc.Node();\n\t\t\t\t        label_G.addComponent(cc.Label);\n\t\t\t\t        label_G.getComponent(cc.Label).fontSize = 12\n\t\t\t\t        label_G.getComponent(cc.Label).string = (checkTarget.y + \"\" + checkTarget.x)+ \"，F：\"+(G+H)+  \"\\nG:\"+G+\"，H:\"+H;\n\t\t\t\t        tempCheckTarget.addChild(label_G);\n\t\t\t\t\t\topenList.push(item);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t    \tif (openList[0].isStart == 1) {//-----------处理起点的首次增删数组操作\n\t    \t\tcloseList.push(openList[0]);\n\t\t\t\topenList.splice(0,1);\n\t\t\t\tj = -1;//-------------------------------初始化循环次数\n\t    \t}\n\t    \tfor (let i = 0; i < openList.length; i++) {//----------循环取F值最小值\n\t    \t\tif (openList[i] && minF == 0) {//------------------------为了排除可能会遇到没F值的父格子，当存在的F值的循环才初始化\n\t    \t\t\tminF = openList[i];\n\t    \t\t}\n\t    \t\tif (minF.F > openList[i].F) {\n\t    \t\t\tminF = openList[i];\n\t    \t\t}\n\t    \t}\n\t    \tfor (let i = 0; i < openList.length; i++) {//----------依靠最新的F值最小值格子得出新的父节点\n\t    \t\tif (openList[i].F == minF.F) {\n\t    \t\t\tparent = openList[i];\n\t    \t\t\tcloseList.push(openList[i]);\n\t    \t\t\topenList.splice(i,1);\n\t    \t\t\tj = -1;//-------------------------------初始化循环次数\n\t    \t\t\tminF = 0;//-----------初始化F值最小值\n\t    \t\t}\n\t    \t}\n\t    \tif (parent.x == tempEndTarget.x && parent.y == tempEndTarget.y) {//---------------如果临时确认数组收录了终点，就退出循环\n\t\t\t\tisSure_start = 1;\n\t\t\t}\n    \t}\n\t\tfor (let j = 0; j < closeList.length; j++) {\n\t\t\tthis.batBox.getChildByName(\"batBox_y\" + closeList[j].y + \"_x\" + closeList[j].x).setColor(cc.color(\"#008102\"));//-----测试阶段，上颜色标识用\n\t\t}\n\t\tcloseList = closeList.reverse();\n\t\tsureList.push(parent);\n\t\t//计算最终路线    原理：从临时确认数组中反过来走到起点\n\t\tfor (let j = 0; j < closeList.length; j++) {\n\t\t\tif (isSure_end == 1) { break; }//----------已回到起点，退出循环\n\t\t\tlet obsExList = [];//--------------障碍物上下左右格子的数组\n    \t\tlet obsId_right = null;//----------当前障碍物格子的右侧格子--临时禁止加入临时数组\n    \t\tlet obsId_down = null;//-----------当前障碍物格子的下侧格子--临时禁止加入临时数组\n    \t\tlet obsId_left = null;//-----------当前障碍物格子的左侧格子--临时禁止加入临时数组\n    \t\tlet obsId_top = null;//------------当前障碍物格子的上侧格子--临时禁止加入临时数组\n    \t\tlet tempSureList = [];\n\t\t\tconsole.log(j+\"——————————————————————————————————————————————————\");\n\t\t\tfor (let i = 0; i < directionList.length; i++) {\n\t\t\t\t//获取当前循环的父节点格子  \n\t    \t\tlet tempCheckTarget = this.batBox.getChildByName(\"batBox_y\" + (parent.y + directionList[i].y) + \"_x\" + (parent.x + directionList[i].x));\n\t    \t\tif (tempCheckTarget) {//----------是否存在格子\n\t\t\t\t\tvar checkTarget = tempCheckTarget.getComponent(\"batBox_basic\");\n\t    \t\t\tif (checkTarget.bat_obstacle) {//---------------------当前循环九宫格格子是障碍物\n\t    \t\t\t\tif (i == 0 || i == 2 || i == 4 || i == 6) {\n\t    \t\t\t\t\tobsId_right = {y:(checkTarget.y + directionList[0].y),x:(checkTarget.x + directionList[0].x)};\n\t    \t\t\t\t\tobsId_down = {y:(checkTarget.y + directionList[2].y),x:(checkTarget.x + directionList[2].x)};\n\t    \t\t\t\t\tobsId_left = {y:(checkTarget.y + directionList[4].y),x:(checkTarget.x + directionList[4].x)};\n\t    \t\t\t\t\tobsId_top = {y:(checkTarget.y + directionList[6].y),x:(checkTarget.x + directionList[6].x)};\n\t    \t\t\t\t\tobsExList.push(obsId_right,obsId_down,obsId_left,obsId_top);\n\t    \t\t\t\t}\n\t    \t\t\t}\n\t    \t\t}\n\t\t\t}\n\t\t\tfor (let i = 0; i < directionList.length; i++) {\n\t    \t\tlet isClose = 0;//-----------------是否已记录在确认数组标识   0：不是   1：是\n\t    \t\tlet isObstacle = 0;//--------------是否障碍物   0：不是   1：是\n\t    \t\tlet isObsEx = 0;//-----------------当前格子是否位于障碍物格子上下左右侧的格子位置上，用于判断是否处于斜格处理   0：不是   1：是\n\t\t\t\tlet tempCheckTarget = this.batBox.getChildByName(\"batBox_y\" + (parent.y + directionList[i].y) + \"_x\" + (parent.x + directionList[i].x));\n\t    \t\tif (tempCheckTarget) {//----------是否存在格子\n\t    \t\t\tvar checkTarget = tempCheckTarget.getComponent(\"batBox_basic\");\n\t    \t\t\tif (checkTarget.bat_obstacle) {//---------------------当前循环九宫格格子是障碍物\n\t    \t\t\t\tisObstacle = 1;\n\t    \t\t\t}else{\n\t    \t\t\t\tfor (let x = 0; x < closeList.length; x++) {//------------------当前循环九宫格格子是否已记录在确认数组\n\t\t\t    \t\t\tif (checkTarget.x == closeList[x].x && checkTarget.y == closeList[x].y) {\n\t\t\t    \t\t\t\tfor (let o = 0; o < obsExList.length; o++) {//------------------当前循环九宫格格子是否位于障碍物格子上下左右侧的格子位置上，是的话就不能纳入赋值ghf处理\n\t\t\t    \t\t\t\t\tif (checkTarget.x == obsExList[o].x && checkTarget.y == obsExList[o].y) {\n\t\t\t\t    \t\t\t\t\tisObsEx = 1;\n\t\t\t\t    \t\t\t\t\tbreak;\n\t\t\t\t    \t\t\t\t}\n\t\t\t    \t\t\t\t}\n\t\t\t    \t\t\t\tif (isObsEx == 0) {\n\t\t\t    \t\t\t\t\ttempSureList.push(closeList[x]);\n\t\t\t    \t\t\t\t}\n\t\t\t    \t\t\t}\n\t\t\t    \t\t}\n\t    \t\t\t}\n\t    \t\t}\n\t\t\t}\n\t\t\tfor (let i = 0; i < tempSureList.length; i++) {//----------循环取F值最小值\n\t    \t\tif (tempSureList[i] && minG == 0) {//------------------------为了排除可能会遇到没G值的父格子，当存在的G值的循环才初始化\n\t    \t\t\tminG = tempSureList[i];\n\t    \t\t}\n\t    \t\tif (minG.G > tempSureList[i].G) {\n\t    \t\t\tminG = tempSureList[i];\n\t    \t\t}\n\t    \t}\n\t    \tfor (let i = 0; i < tempSureList.length; i++) {//----------依靠最新的G值最小值格子得出新的父节点\n\t    \t\tif (tempSureList[i].G == minG.G) {\n\t    \t\t\tparent = tempSureList[i];\n\t    \t\t\tsureList.push(tempSureList[i]);\n\t    \t\t\tminG = 0;//-----------初始化G值最小值\n\t    \t\t}\n\t    \t}\n\t\t\tif (parent.x == startTarget.x && parent.y == startTarget.y) {//---------------如果临时确认数组收录了起点，就退出循环\n\t\t\t\tisSure_end = 1;\n\t\t\t}\n\t\t}\n\t\tfor (let j = 0; j < sureList.length; j++) {\n\t\t\tthis.batBox.getChildByName(\"batBox_y\" + sureList[j].y + \"_x\" + sureList[j].x).setColor(cc.color(\"#bbb\"));//-----测试阶段，上颜色标识用\n\t\t}\n\t\t//console.log(sureList,closeList);\n\t\treturn sureList.reverse();\n    },\n    //获取最近敌人\n    getNearEnemy: function(target,dataList){\n    \tlet tempList = [];\n    \tlet enemyList = [];\n    \tvar minF = 0;\n    \tfor (let i = 0; i < dataList.length; i++) {\n    \t\tif (dataList[i].groupId == 2) {\n\t\t    \tlet H_x = Math.abs(dataList[i].x - target.x);\n\t\t\t\tlet H_y = Math.abs(dataList[i].y - target.y);\n\t\t\t\tlet H = (H_x + H_y) * 10;\n\t\t\t\tlet G = 0;\n\t\t\t\tlet item = {\n\t\t\t\t\tx: dataList[i].x,\n\t\t\t\t\ty: dataList[i].y,\n\t\t    \t\tG: G,//--------------------------------从起点 A 移动到指定方格的移动代价，沿着到达该方格而生成的路径。\n\t\t    \t\tH: H,//--------------------------------从指定的方格移动到终点 B 的估算成本\n\t\t    \t\tF: G+H\n\t\t\t\t}\n\t\t\t\ttempList.push(item);\n    \t\t\tenemyList.push(dataList[i]);\n    \t\t}\n    \t}\n    \tfor (let i = 0; i < tempList.length; i++) {\n    \t\tif (tempList[i].F && minF == 0) {//------------------------为了排除可能会遇到没F值的父格子，当存在的F值的循环才初始化\n    \t\t\tminF = tempList[i];\n    \t\t}\n    \t\tif (minF.F > tempList[i].F) {\n    \t\t\tminF = tempList[i];\n    \t\t}\n    \t}\n    \treturn minF;\n    },\n});\n"]}