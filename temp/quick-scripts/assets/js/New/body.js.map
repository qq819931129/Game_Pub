{"version":3,"sources":["body.js"],"names":["AttackType","require","cc","Class","extends","Component","properties","person","default","type","Node","onLoad","update","init","animHelper","getComponent","parentCopm","director","getCollisionManager","enabled","enabledDrawBoundingBox","node","group","parent","log","attackOver","atkTarget","activeInHierarchy","die","atkType","Melee","damagePoint","atkPoint","damage","createFlyer","moveOver","playAttack","playMove","getAnimState","onCollisionEnter","other","self","demage"],"mappings":";;;;;;AAAA,IAAMA,aAAaC,QAAQ,OAAR,EAAiBD,UAApC;AACAE,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACTC,gBAAO,EAAE;AACJC,qBAAS,IADP;AAEFC,kBAAMP,GAAGQ;AAFP;AADE,KAHP;AASLC,YAAQ,kBAAY,CAEnB,CAXI;AAYLC,YAAQ,kBAAY,CAEnB,CAdI;AAeLC,UAAK,gBAAU;AACX,aAAKC,UAAL,GAAkB,KAAKC,YAAL,CAAkB,YAAlB,CAAlB;AACA,aAAKC,UAAL,GAAkB,KAAKT,MAAL,CAAYQ,YAAZ,CAAyB,QAAzB,CAAlB;;AAEA;AACAb,WAAGe,QAAH,CAAYC,mBAAZ,GAAkCC,OAAlC,GAA4C,IAA5C;AACA;AACAjB,WAAGe,QAAH,CAAYC,mBAAZ,GAAkCE,sBAAlC,GAA2D,IAA3D;AACA,aAAKC,IAAL,CAAUC,KAAV,GAAkB,KAAKD,IAAL,CAAUE,MAAV,CAAiBD,KAAnC;AACApB,WAAGsB,GAAH,CAAO,KAAKH,IAAL,CAAUC,KAAjB;AACH,KAzBI;AA0BLG,gBAAY,sBAAY;AACpB,YAAI,KAAKT,UAAL,CAAgBU,SAAhB,IAA6B,IAA7B,IACG,CAAC,KAAKV,UAAL,CAAgBU,SAAhB,CAA0BC,iBAD9B,IAEG,KAAKX,UAAL,CAAgBU,SAAhB,CAA0BE,GAA1B,IAAiC,CAFxC,EAE2C;AACvC;AACH;AACD,YAAG,KAAKZ,UAAL,CAAgBa,OAAhB,IAA2B7B,WAAW8B,KAAzC,EAA+C;AAC3C,gBAAIC,cAAc,KAAKf,UAAL,CAAgBgB,QAAlC,CAD2C,CACC;AAC5C,iBAAKhB,UAAL,CAAgBU,SAAhB,CAA0BX,YAA1B,CAAuC,QAAvC,EAAiDkB,MAAjD,CAAwDF,WAAxD;AACH,SAHD,MAGK;AACD,iBAAKf,UAAL,CAAgBkB,WAAhB;AACH;AACJ,KAtCI;AAuCLC,cAAU,oBAAY;AAClB;AACH,KAzCI;;AA2CLC,gBAAW,sBAAU;AACjB,aAAKtB,UAAL,CAAgBsB,UAAhB;AACH,KA7CI;;AA+CLC,cAAS,oBAAU;AACf,aAAKvB,UAAL,CAAgBuB,QAAhB;AACH,KAjDI;;AAmDLC,kBAAa,wBAAU;AACnB,aAAKxB,UAAL,CAAgBwB,YAAhB;AACH,KArDI;AAsDL;;;;;AAKAC,sBAAkB,0BAAUC,KAAV,EAAiBC,IAAjB,EAAuB;AACrC,YAAIC,SAASF,MAAMnB,IAAN,CAAWN,YAAX,CAAwB,WAAxB,EAAqCkB,MAAlD;AACA,aAAKjB,UAAL,CAAgBU,SAAhB,CAA0BX,YAA1B,CAAuC,QAAvC,EAAiDkB,MAAjD,CAAwDS,MAAxD;AACH;;AA9DI,CAAT","file":"body.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\js\\New","sourcesContent":["const AttackType = require('Types').AttackType;\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n       person:{ //身体节点\r\n            default: null,\r\n            type: cc.Node,\r\n        }\r\n    },\r\n    onLoad: function () {\r\n       \r\n    },\r\n    update: function () {\r\n\r\n    },\r\n    init:function(){\r\n        this.animHelper = this.getComponent('animHelper');\r\n        this.parentCopm = this.person.getComponent('person');\r\n\r\n        //启用碰撞事件\r\n        cc.director.getCollisionManager().enabled = true;\r\n        //cc.director.getCollisionManager().enabledDebugDraw = true;\r\n        cc.director.getCollisionManager().enabledDrawBoundingBox = true;\r\n        this.node.group = this.node.parent.group;\r\n        cc.log(this.node.group);\r\n    },\r\n    attackOver: function () {\r\n        if (this.parentCopm.atkTarget == null \r\n            || !this.parentCopm.atkTarget.activeInHierarchy \r\n            || this.parentCopm.atkTarget.die == 0) {\r\n            return;\r\n        }\r\n        if(this.parentCopm.atkType == AttackType.Melee){\r\n            var damagePoint = this.parentCopm.atkPoint; //后面会加入伤害公式计算\r\n            this.parentCopm.atkTarget.getComponent('person').damage(damagePoint);\r\n        }else{\r\n            this.parentCopm.createFlyer();\r\n        }\r\n    },\r\n    moveOver: function () {\r\n        // cc.log('moveOver');\r\n    },\r\n\r\n    playAttack:function(){\r\n        this.animHelper.playAttack();\r\n    },\r\n\r\n    playMove:function(){\r\n        this.animHelper.playMove();\r\n    },\r\n    \r\n    getAnimState:function(){\r\n        this.animHelper.getAnimState();\r\n    },\r\n    /**\r\n     * 当碰撞产生的时候调用\r\n     * @param  {Collider} other 产生碰撞的另一个碰撞组件\r\n     * @param  {Collider} self  产生碰撞的自身的碰撞组件\r\n     */\r\n    onCollisionEnter: function (other, self) {\r\n        let demage = other.node.getComponent('flyerMove').damage;\r\n        this.parentCopm.atkTarget.getComponent('person').damage(demage);\r\n    }\r\n\r\n});"]}